
<!DOCTYPE html>
<html>
<head>
  <script src="https://cdn.jsdelivr.net/npm/vega@6.2.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@6.1.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@7.0.2"></script>
</head>
<body>
<div id="vis"></div>
<script>
const spec = {
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {"values": [
      {"franja":"00:00-02:59","siniestros":38377,"nivel":"Baja incidencia"},
      {"franja":"03:00-05:59","siniestros":25955,"nivel":"Baja incidencia"},
      {"franja":"06:00-08:59","siniestros":135343,"nivel":"Incidencia media"},
      {"franja":"09:00-11:59","siniestros":137274,"nivel":"Incidencia media"},
      {"franja":"12:00-14:59","siniestros":157191,"nivel":"Alta incidencia"},
      {"franja":"15:00-17:59","siniestros":167292,"nivel":"Alta incidencia"},
      {"franja":"18:00-20:59","siniestros":150236,"nivel":"Alta incidencia"},
      {"franja":"21:00-23:59","siniestros":80665,"nivel":"Baja incidencia"}
  ]},
  "layer": [
    {
      "mark": {"type": "line", "strokeWidth": 2},
      "encoding": {
        "x": {"field": "franja", "type": "nominal", "title": "Franja horaria"},
        "y": {"field": "siniestros", "type": "quantitative",
              "title": "Siniestros acumulados", "axis": {"format": ".0f"}},
        "color": {"value":"#1E3A68"}
      }
    },
    {
      "mark": {"type": "circle", "size": 200},
      "encoding": {
        "x": {"field": "franja","type": "nominal"},
        "y": {"field": "siniestros","type": "quantitative"},
        "color": {
          "field":"nivel",
          "scale": {"domain":["Alta incidencia","Incidencia media","Baja incidencia"],
                    "range":["#F2994A","#2E7D5B","#1E3A68"]},
          "title":"Nivel"
        },
        "tooltip":[
          {"field":"franja"},
          {"field":"siniestros","format":".0f"},
          {"field":"nivel"}
        ]
      }
    }
  ],
  "height": 380,
  "width": 650,
  "title": "Riesgo ferroviario por franja horaria"
};
vegaEmbed("#vis", spec);
</script>
</body>
</html>
